<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="login.css" rel="stylesheet"/>
  </head>
  <body>
    <img class="logo" src="https://theleaflet.in/wp-content/uploads/2022/03/The-Leaflet-Logo.png">
    <form id="form-login" method="post" action="/Portals.html">
        <div class="form">
      <div>
        <label for="username">username:</label>
        <input type="text" name="username" id="name"  placeholder="username"/>
      </div>
      <div>
        <label for="password">password:</label>
        <input type="text" name="password" id="password" placeholder="password"/>
      </div>
      <div>
        <button
          type="submit"
          style="
            background: linear-gradient(
              45deg,
              #ff512f 0%,
              #f09819 51%,
              #ff512f 100%
            );
          "
          class="button"
        >
          login
        </button>
      </div>
      </div>
    </form>
  </body>
  <script>
    const form = document.getElementById("form-login");
    form.addEventListener("submit", async function (e) {
      e.preventDefault();
      const payload = new FormData(form);
      const values = [...payload.values()];
      //console.log(payload.values())
      console.log(values);
      var response = await fetch("http://3.109.88.105:5000/upload_login", {
        method: "POST",
        body: payload,
        // headers: {'Access-Control-Allow-Origin':'*'}
      });
      var res = await response.text();
      alert(res); 
      // window.alert(res);
      if (res == "login success") {
        // if HTTP-status is 200-299
        // get the response body (the method explained below)
        // let json = await response.text();
        // console.log(json);
        form.submit();
      } else if (res == "fail") {
        alert("invalid credentials");
      } else {
        alert("failed to upload article");
      }
    });
  </script>
</html>
